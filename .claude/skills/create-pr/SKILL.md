---
name: create-pr
description: GitHub PRを作成します。compareブランチとbaseブランチを指定してタイトルとディスクリプションを自動生成します。
allowed-tools:
  - Bash
  - Read
  - AskUserQuestion
---

# GitHub PR作成スキル

このスキルはGitHub PRを作成し、タイトルとディスクリプションを自動生成します。

## 引数

引数は以下のように解釈します：
- 第1引数: compareブランチ（指定なしの場合は現在のブランチ）
- 第2引数: baseブランチ（指定なしの場合は`main`）

## 実行手順

### 1. ブランチ情報の取得

#### 1.1 現在のブランチを取得
```bash
git branch --show-current
```

#### 1.2 compareブランチの決定
- 引数が指定されている場合: 第1引数を使用
- 指定されていない場合: 現在のブランチを使用

#### 1.3 baseブランチの決定
- 引数が指定されている場合: 第2引数を使用
- 指定されていない場合: `main`を使用

### 2. 差分情報の収集

以下のコマンドを並列実行して差分情報を収集します：

#### 2.1 コミット履歴の取得
```bash
git log <base>...<compare> --oneline
```
このコマンドはbaseブランチからcompareブランチまでのコミット履歴を1行ずつ表示します。

#### 2.2 変更ファイル統計の取得
```bash
git diff <base>...<compare> --stat
```
このコマンドは変更されたファイルとその行数の統計を表示します。

#### 2.3 詳細な差分の取得
```bash
git diff <base>...<compare>
```
このコマンドはbaseブランチからcompareブランチまでの詳細な差分を表示します。

### 3. タイトル・ディスクリプションの生成

#### 3.1 タイトル
コミット履歴から変更内容を要約し、1行のタイトルを生成します。

#### 3.2 ディスクリプション
以下のセクションを含むディスクリプションを生成します：

```markdown
## Summary
<変更の要約を箇条書きで記述>

## Changes
<変更ファイルの一覧>

🤖 Generated with [Claude Code](https://claude.com/claude-code)
```

### 4. ユーザー確認

生成したタイトルとディスクリプションをユーザーに提示し、承認を得ます。
修正の要望があれば反映します。

### 5. PR作成

`gh pr create`コマンドを使用してPRを作成します：

```bash
gh pr create --base <base> --head <compare> --title "タイトル" --body "$(cat <<'EOF'
ディスクリプション
EOF
)"
```

### 6. 結果の報告

PR作成後、PR URLをユーザーに報告します。

## 注意事項

- `gh` CLIがインストールされており、認証済みである必要があります
- リモートリポジトリにcompareブランチがプッシュされている必要があります
- ブランチが存在しない場合はエラーになります
